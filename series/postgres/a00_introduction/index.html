<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noindex"><title>- sysfig</title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet><link rel=stylesheet href=https://sysfig.dev/style.css></head><body><header><div id=menu-button></div><nav id=main-nav><a class=main-nav__link href=/series>Series</a>
<a class=main-nav__link href=/posts>Posts</a>
<a id=main-nav__home-link class=main-nav__link href=/><span id=header-text-logo>sysfig.dev</span><div id=header-logo class=logo></div></a><a class=main-nav__link href=/projects>Projects</a>
<a class=main-nav__link href=/now>Now</a></nav></header><main><div class="single series-post"><h1 class=title></h1><div class=page-meta>// 1 Jan 01</div><div class=series-post-header>This post is part of the series .</div><div class=content><p>PostgreSQL is an open-source, object-relational database management system (ORDBMS) based on <a href=https://dsf.berkeley.edu/postgres.html>POSTGRES</a>. The POSTGRES project was developed by a team at the University of California at Berkeley Computer Science Department, led by Professor Michael Stonebraker. The project lasted from 1986 to 1994, and its last release was v4.2.</p><p>In 1994, Andrew Yu and Jolly Chen rewrote POSTGRES in ANSI C and replaced the original query interpreter (PostQUEL) with a SQL interpreter. This became Postgres95 and later PostgreSQL (or simply &lsquo;Postgres&rsquo;)</p><p>Postgres runs as a <em>master</em> backend (server-side) process (usually the program is named <code>postgres</code>) that listens at a specific port (defaults to <code>5432</code>) for TCP/IP network connections from clients. After accepting and establishing a connection (a.k.a. <em>session</em>), the client can send database operations (i.e. SQL queries) to the master process, who will parse the query, check for permissions and, if allowed, generates an <em>execution plan</em>, execute the plan on the client&rsquo;s behalf, and return the results.</p><p>Whenever the server accepts a new TCP connection, it spawns/forks a new process. This means there&rsquo;s a process for the master process and separate processes for each connection. Therefore, if your database is being used by 50 different clients, then at least 51 processes would be running on the web server.</p><p>A single Postgres database server can manage many databases. A collection of databases managed by a single PostgreSQL server instance can be referred to as a database <em>cluster</em>. Typically, you&rsquo;d use a separate database for each project. Within a database, you may create different <em>tables</em> (or <em>relations</em> in formal SQL speak) that hold different kinds of data (e.g. you may have <code>users</code> and <code>products</code> table). A table is made up of columns of a specific data type (e.g. numeric type) and rows (where each row is a distinct entry in the table)</p><h2 id=users>Users</h2><p>When you connect to a Postgres server, you choose what Postgres user to authenticate as.</p><p>Note that PostgreSQL user accounts are completely independent from the (operating) system&rsquo;s users accounts. However, many tools default to using your system&rsquo;s username when authenticating with the Postgres server, so you may want to (for convenience) set your Postgres username to be the same as your system&rsquo;s username.</p><p>The user who created the database is a <em>superuser</em>, which is not subject to access controls.</p><h2 id=databases>Databases</h2><p>VERIFY?? There&rsquo;s always a database with the same name as the name of the <em>system</em>&rsquo;s user that started the master process. Typically, this is a user named <code>postgres</code>, and so when you create a new database, you&rsquo;d often find the <code>postgres</code> database already on the server.??VERIFY</p><p>Data are stored as files</p><h2 id=sql>SQL</h2><ul><li>SQL commands end with a semi-colon (<code>;</code>).</li><li>Whitespaces like the number of spaces and indentation carries no semantic meaning</li><li><code>--</code> can be used for comments (everything from the right of <code>--</code> to the next newline character are not evaluated)</li><li>Keywords and identifiers are case-insensitive, except when they are double-quoted</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>table_name</span><span style=color:#f92672>&gt;</span> (
  <span style=color:#f92672>&lt;</span>column_1_name<span style=color:#f92672>&gt;</span>  <span style=color:#f92672>&lt;</span>column_1_type<span style=color:#f92672>&gt;</span>, <span style=color:#75715e>-- comments
</span><span style=color:#75715e></span>  <span style=color:#f92672>&lt;</span>column_2_name<span style=color:#f92672>&gt;</span>  <span style=color:#f92672>&lt;</span>column_2_type<span style=color:#f92672>&gt;</span>
);
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>table_name</span><span style=color:#f92672>&gt;</span>;
</code></pre></div><p>The order of the columns matter because SQL supports the syntax of inserting rows where the values are implicitly mapped to the column in order.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> weather <span style=color:#66d9ef>VALUES</span> (<span style=color:#e6db74>&#39;San Francisco&#39;</span>, <span style=color:#ae81ff>46</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>25</span>, <span style=color:#e6db74>&#39;1994-11-27&#39;</span>);
</code></pre></div><p>You can also explicitly map the columns to the values.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> weather (city, temp_lo, temp_hi, prcp, date)
    <span style=color:#66d9ef>VALUES</span> (<span style=color:#e6db74>&#39;San Francisco&#39;</span>, <span style=color:#ae81ff>43</span>, <span style=color:#ae81ff>57</span>, <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>0</span>, <span style=color:#e6db74>&#39;1994-11-29&#39;</span>);
</code></pre></div><p>Values that are not simple numeric types are quoted using single quotes (<code>'</code>)</p><ul><li><a href=https://www.postgresql.org/docs/current/sql-copy.html><code>COPY</code></a> - copy data into a table from text files</li><li><code>SELECT</code> - retrieve information from the database</li></ul><h3 id=select><code>SELECT</code></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>&lt;</span>columns<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>FROM</span> <span style=color:#f92672>&lt;</span>tables<span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;</span>qualifications<span style=color:#f92672>&gt;</span>
</code></pre></div><p><code>&lt;columns></code> are the columns to return. <code>&lt;tables></code> are the tables where these columns belongs to. <code>&lt;qualifications></code> are an optional set of rules which can restrict the entries returned, or alter the way the results are presented.</p><p>Another way to look at it is that <code>&lt;columns></code> determines which columns are returned, and <code>&lt;qualifications></code> determines which and how rows are returned.</p><p><code>SELECT DISTINCT</code> - remove duplicates from the results</p><h4 id=qualifications>Qualifications</h4><ul><li><code>WHERE</code></li><li><code>ORDER BY</code></li></ul></div><div id=series-navigation><div></div><a class=next href=/series/postgres/a01_data-types/><div class=next-button><span class=next__text>Next</span><img class=next__arrow src=/img/arrow.svg></div><div class=next__title><div class=prev__title__text></div><div class=chapter-order></div></div></a></div></div></main><footer><a href=/><div id=footer-logo-group><div id=footer-logo-base-rect></div><div id=footer-logo-base-circle></div><div id=footer-logo class=logo></div><div id=footer-text><span class=text-logo>sysfig.dev</span>
<span class=copyright>2021</span></div></div></a><div id=footer-about>I am a programmer and DevOps engineer on a quest to make education more accessible for all. <span class=text-logo>sysfig.dev</span> is an outlet for me to share my knowledge on the web, and also to showcase my projects.</div></footer><script src=/js/main.js></script></body></html>