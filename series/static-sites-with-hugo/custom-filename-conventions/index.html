<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Implementing Custom Filename Conventions - sysfig</title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet><link rel=stylesheet href=https://sysfig.dev/style.css></head><body><header><div id=menu-button></div><nav id=main-nav><a class=main-nav__link href=/series>Series</a>
<a class=main-nav__link href=/posts>Posts</a>
<a id=main-nav__home-link class=main-nav__link href=/><span id=header-text-logo>sysfig.dev</span><div id=header-logo class=logo></div></a><a class=main-nav__link href=/projects>Projects</a>
<a class=main-nav__link href=/now>Now</a></nav></header><main><div class="single series-post"><h1 class=title>Implementing Custom Filename Conventions</h1><div class=page-meta>// 15 Dec 20</div><div class=series-post-header>This post is part I5 of the series <a class=series-post-header__series-title href=/series/static-sites-with-hugo/>Generate Static Sites with Hugo</a>.</div><div class=content><p>Currently, the series posts are sorted alphabetically in my editor by their filenames, whilst on the site, they are sorted by date.</p><p>The easiest way to achieve the fourth constraint (Series posts should display in the correct order on the site and in the editor) is implement a filenaming convention where series posts that should come first are first alphabetically. We can then order posts on the site using the underlying file&rsquo;s name.</p><p>I have my own system of ordering series posts by chapter (letter) and intrachapter order (a 2-digit number, starting at 0). This is reflected in the names of each post; for example, <code>B07_themes.md</code> would be the eighth post in the second chapter.</p><h2 id=overriding-title-and-slug>Overriding Title and Slug</h2><p>This ensures series post files are ordered properly on my editor, but its URL path would not be so good for SEO.</p><p>By default, the URL of a page is determined by its name and location within the <code>content/</code> directory. Therefore, a content file at <code>content/series/generate-static-sites-with-hugo/I00_series.md</code> would, by default, appear in <code>&lt;host>/series/generate-static-sites-with-hugo/I00_series</code> However, my file-naming convention won&rsquo;t look too good in the URL path (nor would it be good for SEO). Therefore, we need to use the <code>slug</code> predefined front matter variable to override the path for the page.</p><p>To make it easier, we can use the <a href=https://gohugo.io/functions/replacere/><code>replaceRE</code></a> to automatically remove the chapter and order information from the title and slug.</p><p>Since this logic doesn&rsquo;t need to apply to standalone posts, we should create a new archetype for series posts. Create a file at <code>archetypes/series-posts.md</code> and fill it with the following lines:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#f92672>title</span>: {{ <span style=color:#ae81ff>replace .Name &#34;-&#34; &#34; &#34; | replaceRE &#34;^.+_(.*)&#34; &#34;$1&#34; | title }}</span>
<span style=color:#f92672>slug</span>: {{ <span style=color:#ae81ff>replaceRE &#34;^.+_(.*)&#34; &#34;$1&#34; .Name | lower }}</span>
<span style=color:#f92672>date</span>: {{ <span style=color:#ae81ff>.Date }}</span>
<span style=color:#f92672>draft</span>: <span style=color:#66d9ef>true</span>
<span style=color:#f92672>tags</span>:
    - <span style=color:#ae81ff>web</span>
    - <span style=color:#ae81ff>devops</span>
    - <span style=color:#ae81ff>linux</span>
    - <span style=color:#ae81ff>programming</span>
---
</code></pre></div><blockquote><p><code>.Type</code>, <code>.Date</code>, <code>.Site</code>, <code>.Name</code>, the target content file, and all Hugo functions, are available to use within an archetype template.</p></blockquote><p>In addition to <code>replaceRE</code>, we are also using the <a href=https://gohugo.io/functions/lower/><code>lower</code></a> function to ensure the slug only contain lowercase letters.</p><p>We don&rsquo;t need to update <code>content/series/_index.md</code> since series posts can still use the <code>posts/single.html</code> layout.</p><h2 id=ordering-series-posts-in-layout>Ordering Series Posts in Layout</h2><p>With</p><p><a href=https://github.com/gohugoio/hugo/blob/21fa1e86f2aa929fb0983a0cc3dc4e271ea1cc54/resources/page/pages_sort.go>https://github.com/gohugoio/hugo/blob/21fa1e86f2aa929fb0983a0cc3dc4e271ea1cc54/resources/page/pages_sort.go</a></p><p><code>ByWeight</code>, <code>ByTitle</code>, <code>ByLinkTitle</code>, <code>ByDate</code>, <code>ByPublishDate</code>, <code>ByExpiryDate</code>, <code>ByLastmod</code>, <code>ByLength</code>, <code>ByLanguage</code>, <code>ByParam</code>,</p><p>There is no <code>ByFilePath</code>. To get around that, we can add some logic in the <code>series-posts</code> archetype to add two new params (<code>chapter</code> and <code>order</code>) whose value is derived from the filename.</p><p>We could have used a single front matter field that combines <code>chapter</code> and <code>order</code> together, but spliting it in two helps maintain their semantics (ultimately, it&rsquo;s a personal preference).</p><p>In addition to <code>replaceRE</code>, we are also using <a href=https://gohugo.io/functions/int/><code>int</code></a> to parse the order string as an integer. This isn&rsquo;t strictly necessary, but it feels cleaner to have a numeric value be represented as a numeric type.</p><p>The <code>int</code> function does not work with strings with leading 0&rsquo;s, so we are also using <a href=https://gohugo.io/functions/strings.trimleft/><code>strings.TrimLeft</code></a> to trim leading 0&rsquo;s. But this means <code>00</code> will be trimmed to an empty string (<code>""</code>), which <code>int</code> also rejects. Therefore, we need to use the <a href=https://gohugo.io/functions/default/><code>default</code></a> function to set the value to <code>0</code> if <code>strings.TrimLeft</code> returns with an empty string.</p><p>We can now update the <code>layouts/series/single.html</code> layout to use the new <code>chapter</code> and <code>order</code> params to order our series posts.</p></div><div id=series-navigation><a class=prev href=/series/static-sites-with-hugo/series-page/><div class=prev-button><img class=prev__arrow src=/img/arrow.svg><span class=prev__text>Prev</span></div><div class=prev__title><div class=chapter-order>I4</div><div class=prev__title__text>Creating Series Page</div></div></a><a class=next href=/series/static-sites-with-hugo/series-list-page/><div class=next-button><span class=next__text>Next</span><img class=next__arrow src=/img/arrow.svg></div><div class=next__title><div class=prev__title__text>Creating Series List Page</div><div class=chapter-order>I6</div></div></div></div></main><footer><a href=/><div id=footer-logo-group><div id=footer-logo-base-rect></div><div id=footer-logo-base-circle></div><div id=footer-logo class=logo></div><div id=footer-text><span class=text-logo>sysfig.dev</span>
<span class=copyright>2020</span></div></div></a><div id=footer-about>I am a programmer and DevOps engineer on a quest to make education more accessible for all. <span class=text-logo>sysfig.dev</span> is an outlet for me to share my knowledge on the web, and also to showcase my projects.</div></footer><script src=/js/main.js></script></body></html>