<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Using Base Templates and Blocks - sysfig</title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet><link rel=stylesheet href=https://sysfig.dev/style.css></head><body><header><div id=menu-button></div><nav id=main-nav><a class=main-nav__link href=/series>Series</a>
<a class=main-nav__link href=/posts>Posts</a>
<a id=main-nav__home-link class=main-nav__link href=/><span id=header-text-logo>sysfig.dev</span><div id=header-logo class=logo></div></a><a class=main-nav__link href=/projects>Projects</a>
<a class=main-nav__link href=/now>Now</a></nav></header><main><div class="single series-post"><h1 class=title>Using Base Templates and Blocks</h1><div class=page-meta>// 15 Dec 20</div><div class=series-post-header>This post is part E3 of the series <a class=series-post-header__series-title href=/series/static-sites-with-hugo/>Generate Static Sites with Hugo</a>.</div><div class=content><p>We&rsquo;ve componentized most of the layouts into partials, but the layout themselves look almost identical to each other.</p><p><code>layouts/index.html</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.LanguageCode }}&#34;</span>&gt;
{{- partial &#34;head.html&#34; . -}}
&lt;<span style=color:#f92672>body</span>&gt;
    {{- partial &#34;header.html&#34; . -}}
    &lt;<span style=color:#f92672>main</span>&gt;
        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;page-content&#34;</span>&gt;{{ .Content }}&lt;/<span style=color:#f92672>div</span>&gt;
    &lt;/<span style=color:#f92672>main</span>&gt;
    {{- partial &#34;footer.html&#34; . -}}
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p><code>layouts/_default/single.html</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.LanguageCode }}&#34;</span>&gt;
{{- partial &#34;head.html&#34; . -}}
&lt;<span style=color:#f92672>body</span>&gt;
    {{- partial &#34;header.html&#34; . -}}
    &lt;<span style=color:#f92672>main</span>&gt;
        &lt;<span style=color:#f92672>h1</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;title&#34;</span>&gt;{{ .Title }}&lt;/<span style=color:#f92672>h1</span>&gt;
        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;page-content&#34;</span>&gt;{{ .Content }}&lt;/<span style=color:#f92672>div</span>&gt;
    &lt;/<span style=color:#f92672>main</span>&gt;
    {{- partial &#34;footer.html&#34; . -}}
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>Can we do more to remove this last bit of duplication? In fact, we can - with a <em>base template</em> and <em>blocks</em>.</p><p>Create a new base template at <code>layouts/_default/baseof.html</code> with the following content:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ .Site.LanguageCode }}&#34;</span>&gt;
{{- partial &#34;head.html&#34; . -}}
&lt;<span style=color:#f92672>body</span>&gt;
    {{- partial &#34;header.html&#34; . -}}
    &lt;<span style=color:#f92672>main</span>&gt;
        {{- block &#34;main&#34; . }}{{- end }}
    &lt;/<span style=color:#f92672>main</span>&gt;
    {{- partial &#34;footer.html&#34; . -}}
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>A base template allows us to create a common template for every page. Within the base template are placeholder for named blocks. Here, we are defining a placeholder for a block named <code>main</code>. Now, when Hugo constructs a page, it will start with the base template and try to find a block named <code>main</code> from the regular layout template that matched with the content file; if found, it will inject that block into the base template and use the result as the layout. If the <code>main</code> block cannot be found, then it will revert back to using the regular layout template (if found).</p><p>With that in mind, we now need to define a block named <code>main</code> within our regular layout files.</p><p>Replace the entirety of the <code>layouts/index.html</code> with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{{ <span style=color:#a6e22e>define</span> <span style=color:#e6db74>&#34;main&#34;</span> }}
    &lt;<span style=color:#a6e22e>div</span> <span style=color:#a6e22e>class</span>=<span style=color:#e6db74>&#34;page-content&#34;</span>&gt;{{ .<span style=color:#a6e22e>Content</span> }}&lt;<span style=color:#f92672>/</span><span style=color:#a6e22e>div</span>&gt;
{{ <span style=color:#a6e22e>end</span> }}
</code></pre></div><p>And do the same with <code>layouts/_default/single.html</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{{ <span style=color:#a6e22e>define</span> <span style=color:#e6db74>&#34;main&#34;</span> }}
    &lt;<span style=color:#a6e22e>h1</span> <span style=color:#a6e22e>class</span>=<span style=color:#e6db74>&#34;title&#34;</span>&gt;{{ .<span style=color:#a6e22e>Title</span> }}&lt;<span style=color:#f92672>/</span><span style=color:#a6e22e>h1</span>&gt;
    &lt;<span style=color:#a6e22e>div</span> <span style=color:#a6e22e>class</span>=<span style=color:#e6db74>&#34;page-content&#34;</span>&gt;{{ .<span style=color:#a6e22e>Content</span> }}&lt;<span style=color:#f92672>/</span><span style=color:#a6e22e>div</span>&gt;
{{ <span style=color:#a6e22e>end</span> }}
</code></pre></div><p>Now go back to <code>http://localhost:1313</code> and <code>http://localhost:1313/about</code>, you should see no difference, which means our base templates and blocks are working correctly.</p><p>Using blocks is similar to partials, but the important difference is that the <code>partial</code> command injects the same partial for every page, but <code>block</code> injects a different block based on the matched layout.</p><p>This concludes the refactoring of our code. In the next chapter, we will look into creating blog posts.</p></div><div id=series-navigation><a class=prev href=/series/static-sites-with-hugo/head-partial/><div class=prev-button><img class=prev__arrow src=/img/arrow.svg><span class=prev__text>Prev</span></div><div class=prev__title><div class=chapter-order>E2</div><div class=prev__title__text>Pulling Out the Head Element</div></div></a><a class=next href=/series/static-sites-with-hugo/posts-archetypes/><div class=next-button><span class=next__text>Next</span><img class=next__arrow src=/img/arrow.svg></div><div class=next__title><div class=prev__title__text>Creating Posts Archetype</div><div class=chapter-order>F0</div></div></div></div></main><footer><a href=/><div id=footer-logo-group><div id=footer-logo-base-rect></div><div id=footer-logo-base-circle></div><div id=footer-logo class=logo></div><div id=footer-text><span class=text-logo>sysfig.dev</span>
<span class=copyright>2020</span></div></div></a><div id=footer-about>I am a programmer and DevOps engineer on a quest to make education more accessible for all. <span class=text-logo>sysfig.dev</span> is an outlet for me to share my knowledge on the web, and also to showcase my projects.</div></footer><script src=/js/main.js></script></body></html>